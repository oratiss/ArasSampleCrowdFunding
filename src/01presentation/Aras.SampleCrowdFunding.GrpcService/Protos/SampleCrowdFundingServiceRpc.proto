syntax = "proto3";

import "google/protobuf/wrappers.proto";
import "google/protobuf/timestamp.proto";
import "Protos/Common/common.proto";
import "google/protobuf/descriptor.proto";

option csharp_namespace = "Aras.SampleCrowdFundingMicroservice.SampleCrowdFunding.GrpcService";

package SampleCrowdFundingServiceRpc;

service SampleCrowdFundingServiceRpc {
	rpc AddUserRpc(AddUserRequestRpc) returns (AddUserResponseRpc) 
	{
		option (http) = {
			post: "/v1/Users"
			body: "*"
		};
	};
	
	//rpc GetUsersRpc(GetUsersRequestRpc) returns (GetUsersResponseRpc) 
	//{
	//	option (http) = {
	//		get: "/v1/Users"
	//	};
	//};
	
	rpc GetUserByIdRpc(GetUserByIdRequestRpc) returns(GetUserByIdResponseRpc) 
	{
		option (http) = {
			get: "/v1/Users/{User_id}"
		};
	};
}

message Http {
  repeated HttpRule rules = 1;
  bool fully_decode_reserved_expansion = 2;
}

message HttpRule {
  string selector = 1;

  oneof pattern {
    string get = 2;
    string put = 3;
    string post = 4;
    string delete = 5;
    string patch = 6;
    CustomHttpPattern custom = 8;
  }

  string body = 7;
  string response_body = 12;
  repeated HttpRule additional_bindings = 11;
}

message CustomHttpPattern {
  string kind = 1;
  string path = 2;
}

extend google.protobuf.MethodOptions {
  // See `HttpRule`.
  HttpRule http = 72295728;
}

message DecimalValue {
    // Whole units part of the amount
    int64 units = 1;
    // Nano units of the amount (10^-9)
    // Must be same sign as units
    sfixed32 nanos = 2;
}

//========= User ====================
message AddUserRequestRpc{
	string username = 1;
	string firstName=2;
	string lastName=3;
	google.protobuf.StringValue email = 4;
	google.protobuf.StringValue mobileNumber = 5;
	string password = 6;
	google.protobuf.Int64Value modifierUserId = 7;
	int64 creatorUserId = 8;
}

message AddUserResponseRpc
{
	int64 responseStatus = 1;
	repeated string errors = 2;
	UserResultRpc result = 3;
}

message UserResultRpc{
	int32 id = 1;
	string username = 2;
	string firstName = 3;
	string lastName = 4;
	google.protobuf.StringValue email = 5;
	google.protobuf.StringValue mobileNumber = 6;
	google.protobuf.Int64Value modifierUserId = 7;
	int64 creatorUserId = 8;
}

message GetUsersRequestRpc{
    int32 pageSize = 1;
    int32 pageIndex = 2;
    google.protobuf.StringValue orderBy = 3;
    google.protobuf.Int32Value sortOrder = 4;
}

message GetUserByIdRequestRpc{
	int64 User_id = 1;  // Changed from UserId to User_id for URL binding
}

message GetUsersResponseRpc{
	int64 responseStatus = 1;
	repeated string errors = 2;
	repeated UserResultRpc result = 3;
	Common.ResponseMetaDataRpc metaData = 4;
}

message GetUserByIdResponseRpc
{
	int64 responseStatus = 1;
	repeated string errors = 2;
	UserResultRpc result = 3;
}
//========= End of User ====================

